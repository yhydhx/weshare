{% extends "frontEnd/base.html" %}<!-- 继承基础模板 -->
{% load staticfiles %}<!-- 加载全局变量 -->

{% block body %}



  <div class="container" style="margin-top: 60px;">
  	<div class="row">
          {% include "frontEnd/center-left.html" %}<!-- 加载左侧栏 -->
  		    <div class="col-md-10">
              <div class="row" style="margin-top: 30px; margin-bottom:30px; ">
                  <div class="col-xs-1"></div>
                  <div class="col-xs-2">
                      <div class="row" style="color:red; font-size: 20px; padding-top:5px; padding-bottom:5px; ">预约</div>
                      <div class="row" style="display: flex;justify-content: center; ">
                          <div style=" width:40px; height:40px; background-color:red; border-radius:20px;">
                              <span style="height:40px; line-height:40px; display:block; color:#FFF; font-size: 25px; text-align:center">1</span>
                          </div>
                      </div>
                  </div>

                  <!-- 确认 -->
                  {% if appointment.state == 0 %}
                  <div class="col-xs-2">
                      <div class="row" style="color:gray; font-size: 20px; padding-top:5px; padding-bottom:5px; ">确认</div>
                      <div class="row" style="display: flex;justify-content: center; ">
                          <div style=" width:40px; height:40px; background-color:gray; border-radius:20px;">
                              <span style="height:40px; line-height:40px; display:block; color:#FFF; font-size: 25px; text-align:center">2</span>
                          </div>
                      </div>
                  </div>
                  {% elif appointment.state == 1 or appointment.state == 2 or appointment.state == 3 or appointment.state == 4 %}
                  <div class="col-xs-2">
                      <div class="row" style="color:red; font-size: 20px; padding-top:5px; padding-bottom:5px; ">确认</div>
                      <div class="row" style="display: flex;justify-content: center; ">
                          <div style=" width:40px; height:40px; background-color:red; border-radius:20px;">
                              <span style="height:40px; line-height:40px; display:block; color:#FFF; font-size: 25px; text-align:center">2</span>
                          </div>
                      </div>
                  </div>
                  {% endif %}

                  <!-- 付款 -->
                  {% if appointment.state == 0 or appointment.state == 1 %}
                    <div class="col-xs-2">
                      <div class="row" style="color:gray; font-size: 20px; padding-top:5px; padding-bottom:5px; ">付款</div>
                      <div class="row" style="display: flex;justify-content: center; ">
                          <div style=" width:40px; height:40px; background-color:gray; border-radius:20px;">
                              <span style="height:40px; line-height:40px; display:block; color:#FFF; font-size: 25px; text-align:center">3</span>
                          </div>
                      </div>
                    </div>
                  {% elif appointment.state == 2 or appointment.state == 3 or appointment.state == 4 %}
                    <div class="col-xs-2">
                      <div class="row" style="color:red; font-size: 20px; padding-top:5px; padding-bottom:5px; ">付款</div>
                      <div class="row" style="display: flex;justify-content: center; ">
                          <div style=" width:40px; height:40px; background-color:red; border-radius:20px;">
                              <span style="height:40px; line-height:40px; display:block; color:#FFF; font-size: 25px; text-align:center">3</span>
                          </div>
                      </div>
                  </div>
                  {% endif %}

                  <!-- 完成 -->
                  {% if appointment.state == 0 or appointment.state == 1 or appointment.state == 2 %}
                  <div class="col-xs-2">
                      <div class="row" style="color:gray; font-size: 20px; padding-top:5px; padding-bottom:5px; ">完成</div>
                      <div class="row" style="display: flex;justify-content: center; ">
                          <div style=" width:40px; height:40px; background-color:gray; border-radius:20px;">
                              <span style="height:40px; line-height:40px; display:block; color:#FFF; font-size: 25px; text-align:center">4</span>
                          </div>
                      </div>
                  </div>
                  {% elif appointment.state == 3 or appointment.state == 4 %}
                  <div class="col-xs-2">
                      <div class="row" style="color:red; font-size: 20px; padding-top:5px; padding-bottom:5px; ">完成</div>
                      <div class="row" style="display: flex;justify-content: center; ">
                          <div style=" width:40px; height:40px; background-color:red; border-radius:20px;">
                              <span style="height:40px; line-height:40px; display:block; color:#FFF; font-size: 25px; text-align:center">4</span>
                          </div>
                      </div>
                  </div>
                  {% endif %}

                  <!-- 评价 -->
                  {% if appointment.state == 0 or appointment.state == 1 or appointment.state == 2 or appointment.state == 3 %}
                  <div class="col-xs-2">
                      <div class="row" style="color:gray; font-size: 20px; padding-top:5px; padding-bottom:5px; ">评价</div>
                      <div class="row" style="display: flex;justify-content: center; ">
                          <div style=" width:40px; height:40px; background-color:gray; border-radius:20px;">
                              <span style="height:40px; line-height:40px; display:block; color:#FFF; font-size: 25px; text-align:center">5</span>
                          </div>
                      </div>
                  </div>
                  {% elif appointment.state == 4 %}
                  <div class="col-xs-2">
                      <div class="row" style="color:red; font-size: 20px; padding-top:5px; padding-bottom:5px; ">评价</div>
                      <div class="row" style="display: flex;justify-content: center; ">
                          <div style=" width:40px; height:40px; background-color:red; border-radius:20px;">
                              <span style="height:40px; line-height:40px; display:block; color:#FFF; font-size: 25px; text-align:center">5</span>
                          </div>
                      </div>
                  </div>
                  {% endif %}


                  <div class="col-xs-1"></div>
              </div>

              <table class="table table-bordered ">
                <tr>
                    <td colspan="3" style="text-align:left;">编号：{{ appointment.appointment_id }} 发起时间：{{ appointment.recommend_begin_time | date:"Y-m-d" }}</td>
                </tr>
                <tr>
                    <td>
                        <div class="row">
                            <div class="col-md-3"><img src="{{ appointment.to_host_icon }}" style="height: 80px; width: 80px; border: 1px solid #cccccc; border-radius: 50%;"></div>
                            <div class="col-md-9"><h3>{{ appointment.feature_name }}</h3><p>{{ appointment.host_name }} {{ appointment.host_motto }}</p></div>
                        </div>
                    </td>
                    <td>
                      <h4>
                        {% if appointment.state == 0 %}
                          等待分享家确定
                        {% elif appointment.state == 1 %}
                          等待付款
                        {% elif appointment.state == 2 %}
                          已付款
                        {% elif appointment.state == 3 %}
                          约见完成
                        {% elif appointment.state == 4 %}
                          已评价
                        {% endif %}
                      </h4>
                    </td>
                    
                </tr>
              </table>

              <hr style="border: none;border-top: 1px solid black; ">
              
              <form action="/bill/evaluation" method="post">
              {% csrf_token %}
                <div class="panel panel-default">
                  <div class="panel-heading"><h4>对此次约见的评价</h4></div>
                  <div class="panel-body">
                      <input type="hidden" name="appnt_id" value="{{ appointment.id }}">
                      <textarea class="form-control" name="content" rows="5"></textarea>
                      <br>
                      <button type="submit" class="btn btn-lg">提交</button>
                  </div>
                </div>
              </form>

              


          </div>
  	</div>
  </div>

{% endblock %}

{% block js %}
<!-- <script src="{% static 'frontEnd/js/shop.js' %}"></script> -->
{% endblock %}
